<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>VentraOS - CCode Platform</title>
    <style>
        :root {
            --accent: #78A0BD;
            --bg-gradient: linear-gradient(135deg, #e0eafc, #cfdef3);
            --window-bg: #f0f4f8;
            --editor-bg: #ffffff;
        }

        body, html {
            margin: 0; padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-gradient);
            height: 100vh;
            overflow: hidden;
        }

        /* --- HEADER & NAV --- */
        header {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            padding: 10px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .nav-links button {
            background: none; border: none;
            padding: 8px 15px; cursor: pointer;
            font-weight: 600; color: #555;
            transition: 0.3s;
        }

        .nav-links button.active { color: var(--accent); border-bottom: 2px solid var(--accent); }

        /* --- AUTH MODAL --- */
        #auth-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.4); backdrop-filter: blur(5px);
            display: flex; justify-content: center; align-items: center; z-index: 1000;
        }

        .auth-card {
            background: white; padding: 30px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2); width: 320px; text-align: center;
        }

        .auth-card input {
            width: 100%; padding: 12px; margin: 10px 0;
            border-radius: 10px; border: 1px solid #ddd; outline: none;
        }

        .auth-card button {
            width: 100%; padding: 12px; border: none;
            background: var(--accent); color: white;
            border-radius: 10px; cursor: pointer; font-weight: bold;
        }

        /* --- CCODE INTERFACE (REPLICATING YOUR IMAGE) --- */
        #page-ccode {
            display: none; height: calc(100vh - 60px); padding: 20px;
        }

        .ccode-container {
            background: #cbd9e6; border-radius: 15px;
            height: 100%; display: flex; flex-direction: column;
            box-shadow: 0 15px 45px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.4);
        }

        .ccode-header {
            padding: 10px 15px; display: flex; align-items: center; gap: 10px;
            background: transparent;
        }

        .btn-blue { background: #0078d4; color: white; border: none; padding: 6px 15px; border-radius: 15px; cursor: pointer;}
        .tab { background: white; padding: 5px 15px; border-radius: 8px; font-size: 13px; border: 1px solid #ddd;}

        .ccode-body {
            display: grid; grid-template-columns: 1fr 280px; gap: 15px;
            padding: 15px; flex-grow: 1; overflow: hidden;
        }

        .editor-area {
            background: white; border-radius: 18px; padding: 20px;
            font-family: 'Consolas', monospace; font-size: 14px;
            border: none; resize: none; outline: none;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.02);
        }

        .sidebar-panel { display: flex; flex-direction: column; gap: 15px; }

        .side-card {
            background: rgba(255,255,255,0.7);
            border-radius: 18px; padding: 15px; flex-grow: 1;
        }

        .file-item { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; font-size: 14px; color: #333; }
        .icon { width: 24px; height: 24px; background: #eee; border-radius: 5px; }

        .output-panel {
            background: rgba(255,255,255,0.5); height: 120px;
            border-radius: 18px; padding: 15px; font-size: 12px; color: #666;
            display: flex; align-items: flex-end; justify-content: center;
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

<header>
    <div style="display:flex; align-items:center; gap:10px;">
        <div style="background:var(--accent); width:30px; height:30px; border-radius:8px;"></div>
        <b style="font-size:20px;">VentraOS</b>
    </div>
    <div class="nav-links">
        <button id="btn-home" class="active" onclick="switchPage('home')">Головна</button>
        <button id="btn-ccode-nav" onclick="switchPage('ccode')">CCode</button>
    </div>
    <div id="user-info">
        <button onclick="document.getElementById('auth-overlay').classList.remove('hidden')">Увійти</button>
    </div>
</header>

<div id="auth-overlay" class="hidden">
    <div class="auth-card">
        <h2 id="auth-title">Вхід</h2>
        <input type="text" id="username" placeholder="Логін">
        <input type="password" id="password" placeholder="Пароль">
        <button onclick="handleAuth()">Продовжити</button>
        <p style="font-size:12px; cursor:pointer; color:var(--accent); margin-top:15px;" onclick="toggleAuthMode()" id="auth-toggle">Немає акаунта? Реєстрація</p>
    </div>
</div>

<main id="page-home" style="text-align:center; padding-top:100px;">
    <h1>Ласкаво просимо до VentraOS</h1>
    <p>Увійдіть, щоб отримати доступ до вашого середовища розробки CCode.</p>
</main>

<main id="page-ccode">
    <div class="ccode-container">
        <div class="ccode-header">
            <span style="font-size:20px; margin-right:15px;">← →</span>
            <button class="btn-blue" onclick="saveData()">Сохранить</button>
            <button class="tab">Отладка</button>
            <button class="tab">Открыть путь</button>
            <button class="btn-blue" style="background:#28a745;">Запустить</button>
            <div style="flex-grow:1"></div>
            <button class="tab">Настройки</button>
        </div>
        <div style="padding-left:15px; display:flex; gap:5px;">
            <div class="tab" style="border-bottom:none; border-radius:8px 8px 0 0;">mainpage.cyc</div>
            <div class="tab" style="border-bottom:none; border-radius:8px 8px 0 0; background:rgba(255,255,255,0.4)">maininterface.cui</div>
        </div>
        <div class="ccode-body">
            <textarea id="editor" class="editor-area"></textarea>
            
            <div class="sidebar-panel">
                <div class="side-card">
                    <b style="display:block; margin-bottom:15px;">Приложения</b>
                    <div class="file-item"><div class="icon"></div> mainpage.cyc</div>
                    <div class="file-item"><div class="icon"></div> maininterface.cui</div>
                    <div class="file-item"><div class="icon"></div> app.coldapp</div>
                </div>
                <div class="output-panel">Output</div>
            </div>
        </div>
    </div>
</main>

<script>
    let users = JSON.parse(localStorage.getItem('ventra_users')) || {};
    let currentUser = localStorage.getItem('ventra_current');
    let isRegister = false;

    const defaultCode = `import system.var = system\nimport gui.screen = surface\n\nproject(\nuse.maininterface.cui()\nuse.system\n)\n\nint(\nconsole.log-"App Started Secfully"-\nInt.guiscreen = span="TextButton"\nInt.guiscreen = spawn=:"Set a model":\nInt.guiscreen = span:{"Spawn" if click, spawn "3d_cube"}\nconsole.log-"Spawned Secfully!"\n)`;

    function toggleAuthMode() {
        isRegister = !isRegister;
        document.getElementById('auth-title').innerText = isRegister ? "Реєстрація" : "Вхід";
        document.getElementById('auth-toggle').innerText = isRegister ? "Вже є акаунт? Увійти" : "Немає акаунта? Реєстрація";
    }

    function handleAuth() {
        const u = document.getElementById('username').value;
        const p = document.getElementById('password').value;

        if(!u || !p) return alert("Заповніть усі поля!");

        if(isRegister) {
            if(users[u]) return alert("Користувач вже існує!");
            users[u] = { password: p, code: defaultCode };
            localStorage.setItem('ventra_users', JSON.stringify(users));
            alert("Акаунт створено!");
            toggleAuthMode();
        } else {
            if(users[u] && users[u].password === p) {
                currentUser = u;
                localStorage.setItem('ventra_current', u);
                initSession();
            } else {
                alert("Невірні дані!");
            }
        }
    }

    function initSession() {
        if(!currentUser) return;
        document.getElementById('auth-overlay').classList.add('hidden');
        document.getElementById('user-info').innerHTML = `<span>${currentUser}</span> <button onclick="logout()">Вихід</button>`;
        document.getElementById('editor').value = users[currentUser].code;
        switchPage('ccode');
    }

    function logout() {
        localStorage.removeItem('ventra_current');
        location.reload();
    }

    function switchPage(page) {
        if(page === 'ccode' && !currentUser) {
            document.getElementById('auth-overlay').classList.remove('hidden');
            return;
        }
        document.getElementById('page-home').style.display = (page === 'home') ? 'block' : 'none';
        document.getElementById('page-ccode').style.display = (page === 'ccode') ? 'block' : 'none';
        
        document.getElementById('btn-home').classList.toggle('active', page === 'home');
        document.getElementById('btn-ccode-nav').classList.toggle('active', page === 'ccode');
    }

    function saveData() {
        if(!currentUser) return;
        users[currentUser].code = document.getElementById('editor').value;
        localStorage.setItem('ventra_users', JSON.stringify(users));
        alert("Дані збережені в системі!");
    }

    // При завантаженні перевіряємо чи є сесія
    if(currentUser) initSession();
</script>

</body>
</html>
